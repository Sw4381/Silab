<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보안 지능 연구실 - 기타 활동</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="photo.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <!-- 헤더 -->
    <header class="navbar">
        <div class="logo">
            <a href="index.html">
                <img class="logo-picture" src="./image.png" alt="보안 지능 연구실 로고">
            </a>
        </div>
        <nav class="menu">
            <a href="index.html"><i class="fas fa-graduation-cap"></i> Home</a>
            <a href="./members.html"><i class="fas fa-users"></i> Members</a>
            <a href="./projects.html"><i class="fas fa-file-alt"></i> Projects</a>
            <a href="./Publication.html"><i class="fas fa-copy"></i> Publications</a>
            <a href="./photo.html" class="active"><i class="fas fa-image"></i> Other Activities</a>
        </nav>

        <div class="auth-section">
            <div class="user-info" id="userInfo" style="display: none;">
                <i class="fas fa-user"></i>
                <span id="userName"></span>
            </div>
            <button class="login-btn" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i>
                로그인
            </button>
            <button class="logout-btn" id="logoutBtn" style="display: none;">
                <i class="fas fa-sign-out-alt"></i>
                로그아웃
            </button>
        </div>
    </header>

    <!-- Firebase 로그인 모달 -->
    <div id="loginModal" class="login-modal">
        <div class="login-modal-content">
            <span class="login-close" id="loginClose">&times;</span>
            <form class="login-form" id="loginForm">
                <h2><i class="fab fa-firebase"></i> 연구실 로그인</h2>
                <div class="form-group">
                    <label for="email">이메일</label>
                    <input type="email" id="email" name="email" required placeholder="example@gachon.ac.kr">
                </div>
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-submit">
                    <i class="fas fa-sign-in-alt"></i> 로그인
                </button>
                <div class="login-help">
                    연구실 멤버만 접근 가능합니다.
                </div>
            </form>
        </div>
    </div>

    <div class="container">

        <!-- 관리자 패널 -->
        <div class="admin-panel" id="adminPanel">
            <h3><i class="fas fa-tools"></i> 특허 & 수상내역 관리</h3>
            <div class="admin-buttons">
                <button class="admin-btn" id="addPatentBtn">
                    <i class="fas fa-plus"></i>
                    특허 추가
                </button>
                <button class="admin-btn" id="addAwardBtn">
                    <i class="fas fa-plus"></i>
                    수상내역 추가
                </button>
                <button class="admin-btn edit" id="toggleEditMode">
                    <i class="fas fa-edit"></i>
                    수정 모드 토글
                </button>
                <button class="admin-btn delete" id="toggleDeleteMode">
                    <i class="fas fa-trash"></i>
                    삭제 모드 토글
                </button>
            </div>
        </div>

        <!-- 특허 추가 폼 -->
        <div class="add-patent-form" id="addPatentForm">
            <h4><i class="fas fa-plus-circle"></i> 새 특허 추가</h4>
            <form id="patentForm">
                <div class="form-group">
                    <label for="patentNumber">특허 번호 *</label>
                    <input type="text" id="patentNumber" name="patentNumber" placeholder="예: PT42" required>
                </div>
                <div class="form-group">
                    <label for="patentContent">특허 내용 *</label>
                    <textarea id="patentContent" name="patentContent"
                        placeholder="예: 설명 가능한 산업제어시스템 악성행위 탐지 기술 방법, (10-2846030, 2025.8)" required></textarea>
                </div>
                <div class="form-buttons">
                    <button type="button" class="cancel-btn" id="cancelAddPatent">취소</button>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i> 저장
                    </button>
                </div>
            </form>
        </div>

        <!-- 수상내역 추가 폼 -->
        <div class="add-award-form" id="addAwardForm">
            <h4><i class="fas fa-plus-circle"></i> 새 수상내역 추가</h4>
            <form id="awardForm">
                <div class="form-group">
                    <label for="awardContent">수상 내용 *</label>
                    <textarea id="awardContent" name="awardContent"
                        placeholder="예: 김현서, 한태현, 이태진 - 한국정보보호학회 동계학술대회 한국정보보호학회장상 최우수논문상 (2025.11)" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="awardHighlight">하이라이트 (선택사항)</label>
                        <input type="text" id="awardHighlight" name="awardHighlight"
                            placeholder="예: 최우수논문상 (빨간색으로 강조될 텍스트)">
                    </div>
                    <div class="form-group">
                        <label for="awardDate">날짜 *</label>
                        <input type="date" id="awardDate" name="awardDate" required>
                    </div>
                </div>
                <div class="form-buttons">
                    <button type="button" class="cancel-btn" id="cancelAddAward">취소</button>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i> 저장
                    </button>
                </div>
            </form>
        </div>

        <!-- 항목 수정 폼 (특허/수상내역 공통) -->
        <div class="edit-item-form" id="editItemForm">
            <h4><i class="fas fa-edit"></i> 항목 수정</h4>
            <form id="itemEditForm">
                <input type="hidden" id="editItemKey" name="editItemKey">
                <input type="hidden" id="editItemType" name="editItemType">

                <div class="form-group" id="editPatentNumberGroup">
                    <label for="editPatentNumber">특허 번호 *</label>
                    <input type="text" id="editPatentNumber" name="editPatentNumber">
                </div>

                <div class="form-group">
                    <label for="editItemContent">내용 *</label>
                    <textarea id="editItemContent" name="editItemContent" required></textarea>
                </div>

                <div class="form-group" id="editHighlightGroup" style="display: none;">
                    <label for="editItemHighlight">하이라이트 (선택사항)</label>
                    <input type="text" id="editItemHighlight" name="editItemHighlight">
                </div>

                <div class="form-group" id="editDateGroup" style="display: none;">
                    <label for="editAwardDate">날짜</label>
                    <input type="date" id="editAwardDate" name="editAwardDate">
                </div>

                <div class="form-buttons">
                    <button type="button" class="cancel-btn" id="cancelEditItem">취소</button>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i> 수정 완료
                    </button>
                </div>
            </form>
        </div>

        <!-- 활동 헤더 -->
        <div class="activities-header hidden">
            <h1>Other Activities</h1>
            <p>보안지능연구실의 특허, 수상 내역 및 연구실 활동을 소개합니다.</p>
        </div>

        <div class="section-nav hidden">
            <button class="section-nav-btn" data-target="patents">
                <i class="fas fa-certificate"></i> Patents
            </button>
            <button class="section-nav-btn" data-target="awards">
                <i class="fas fa-trophy"></i> Awards
            </button>
            <button class="section-nav-btn" data-target="photos">
                <i class="fas fa-camera"></i> Photo
            </button>
        </div>

        <!-- 특허 섹션 -->
        <div class="section hidden" id="patents">
            <h2><i class="fas fa-certificate"></i> Patents</h2>
            <ul class="patent-list"></ul>
        </div>

        <!-- 수상 내역 섹션 -->
        <div class="section hidden" id="awards">
            <h2><i class="fas fa-trophy"></i> Awards</h2>
            <ul class="award-list"></ul>
        </div>

        <!-- Photo Gallery -->
        <div class="section hidden" id="photos">
            <h2 class="photo-header">
                <span><i class="fas fa-camera"></i> Photo Gallery</span>
                <div class="photo-header-actions">
                    <button class="photo-header-btn" id="photoViewAllBtn" type="button">
                        <i class="fas fa-th"></i> 전체 보기
                    </button>
                </div>
            </h2>

            <!-- ✅ 카테고리(대표사진) 뷰 -->
            <div class="photo-category-view" id="photoCategoryView">
                <div class="photo-category-top">
                    <div class="photo-hint">
                        <i class="fas fa-mouse-pointer"></i>
                        카테고리 또는 연도를 클릭하면 관련 사진이 전체 표시됩니다.
                    </div>
                </div>

                <!-- ✅ YEAR CARDS -->
                <div class="photo-subsection">
                    <div class="photo-subsection-title">
                        <i class="fas fa-calendar-alt"></i> 년도별 보기
                    </div>
                    <div class="photo-years" id="photoYears">
                        <!-- JS로 년도 카드 생성 -->
                    </div>
                </div>

                <!-- ✅ CATEGORY CARDS -->
                <div class="photo-subsection">
                    <div class="photo-subsection-title">
                        <i class="fas fa-folder-open"></i> 카테고리별 보기
                    </div>
                    <div class="photo-categories" id="photoCategories">
                        <!-- JS로 카테고리 카드 생성 -->
                    </div>
                </div>
            </div>

            <!-- ✅ 갤러리 뷰 -->
            <div class="photo-gallery-view" id="photoGalleryView" style="display:none;">
                <div class="photo-gallery-toolbar">
                    <button class="photo-back-btn" id="photoBackBtn" type="button">
                        <i class="fas fa-arrow-left"></i> 카테고리로
                    </button>

                    <div class="photo-gallery-title">
                        <span class="pill" id="photoActiveCategoryPill">전체 · 전체년도</span>
                        <span class="count" id="photoActiveCount">0</span>
                    </div>

                    <div class="photo-gallery-right">
                        <button class="photo-clear-btn" id="photoClearFiltersBtn" type="button">
                            <i class="fas fa-rotate-left"></i> 필터 초기화
                        </button>

                        <div class="photo-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="photoSearchInput" placeholder="제목 검색 (예: 워크숍, 송별회)">
                        </div>
                    </div>
                </div>

                <!-- ✅ Year chips (갤러리 내부에서 연도 선택) -->
                <div class="photo-year-chips" id="photoYearChips"></div>

                <!-- ✅ Board -->
                <div class="photo-board" id="photoBoard"></div>
            </div>
        </div>

        <!-- 푸터 -->
        <footer>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:kinjecs0@gmail.com">kinjecs0@gmail.com</a>
                </div>
                <div class="divider"></div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>가천대학교 스마트보안학과</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- 사진 모달 -->
    <div class="photo-modal" id="photoModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"></h3>
                <button class="modal-close" id="modalClose" type="button">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <div class="modal-image-container">
                    <img class="modal-image" src="" alt="">
                </div>

                <div class="modal-info">
                    <div class="modal-meta">
                        <div class="modal-date">
                            <i class="fas fa-calendar"></i>
                            <span class="date-text"></span>
                        </div>
                        <div class="modal-category">
                            <i class="fas fa-tag"></i>
                            <span class="category-text"></span>
                        </div>
                    </div>

                    <div class="modal-description">
                        <p class="description-text"></p>
                    </div>
                </div>
            </div>

            <div class="modal-navigation">
                <button class="nav-btn prev-photo" id="prevPhoto" type="button">
                    <i class="fas fa-chevron-left"></i>
                    이전
                </button>
                <button class="nav-btn next-photo" id="nextPhoto" type="button">
                    다음
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="photo.js"></script>
</body>
</html>
